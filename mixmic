#!/usr/bin/gjs

const GLib = imports.gi.GLib;
const Lang = imports.lang;
const Gtk = imports.gi.Gtk;
const Webkit = imports.gi.WebKit;

const Application = new Lang.Class({
    Name: 'MixMic',
    
    _init: function() {
        this.application = new Gtk.Application();
        
        this.application.connect('activate', Lang.bind(this, this._onActivate));
        this.application.connect('startup', Lang.bind(this, this._onStartup));
    },
    
    _buildUI: function()Â {
        // Window
        this._window = new Gtk.ApplicationWindow({ 
            application: this.application,
            title: "MixMic: mix your mics",
            default_height: 200,
            default_width: 800,
            window_position: Gtk.WindowPosition.CENTER });
        
        // Webview
        this._webView = new Webkit.WebView();
        this._webView.load_uri(GLib.filename_to_uri(GLib.get_current_dir()
            + "/mixmic.html", null));
        this._window.add(this._webView);
        this._window.show_all();
    },
    
    _onActivate: function() {
        this._window.present();
    },
    
    _onStartup: function() {
        this._buildUI();
    }
});

let app = new Application();
app.application.run(ARGV);
